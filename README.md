# WebAssemblyを使ったSpectre攻撃の有効性
ここではポスターに載せきれなかった細かい話を書きます。

## ブラウザにおけるキャッシュタイミング攻撃の実装
まず前提として、WebAssemblyで使える機能は基本的にAPIとしてランタイムから与えられます。ブラウザでWebAssemblyを動かす場合はJavaScriptエンジン内で実行されるので、WebAssemblyが使える機能は最大でもJavaScriptが使える機能までということになります。なのでWebAssemblyでのキャッシュタイミング攻撃に使えるタイマーは、JavaScriptの`performance.now()`など既存の関数となります。実はSpectreが登場したときにすでにブラウザにおけるSpectre攻撃が問題となり、主要なブラウザでは`performance.now()`などのタイマー系の機能を持つ関数は精度が下げられています。ということで、すでに対策が入っているという現状に対し、本当にそれで大丈夫なのかを確かめるというのが目的となります。

ちなみに精度はchromeで0.1ms、firefoxで1ms単位の精度となっています。firefoxでは`about:config`から`privacy.reduceTimerPrecision`という項目を`false`にすることで0.01ms単位の精度に上げることができます。今回は精度を上げたfirefoxで実験しました（これでできなければ安全なので）。

